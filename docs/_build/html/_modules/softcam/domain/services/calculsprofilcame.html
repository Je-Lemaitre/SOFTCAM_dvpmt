<!DOCTYPE html>
<html class="writer-html5" lang="fr" data-content_root="../../../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>softcam.domain.services.calculsprofilcame &mdash; Documentation softcam 2.0</title>
      <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../../../_static/documentation_options.js?v=e8570148"></script>
        <script src="../../../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../../../../_static/translations.js?v=041d0952"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Recherche" href="../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            softcam
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../modules.html">softcam</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">softcam</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">Code du module</a></li>
      <li class="breadcrumb-item active">softcam.domain.services.calculsprofilcame</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Code source de softcam.domain.services.calculsprofilcame</h1><div class="highlight"><pre>
<span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)))))</span>

<span class="kn">from</span> <span class="nn">abc</span> <span class="kn">import</span> <span class="n">ABC</span><span class="p">,</span> <span class="n">abstractmethod</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">numpy.linalg</span> <span class="k">as</span> <span class="nn">npl</span>
<span class="kn">import</span> <span class="nn">scipy.interpolate</span> <span class="k">as</span> <span class="nn">scitp</span>

<span class="kn">from</span> <span class="nn">domain.entities.assemblage</span> <span class="kn">import</span> <span class="n">Assemblage</span><span class="p">,</span> <span class="n">AssemblageLinguet</span><span class="p">,</span> <span class="n">AssemblageDirecte</span>
<span class="kn">from</span> <span class="nn">domain.entities.loiscame</span> <span class="kn">import</span> <span class="n">LoisCame</span>
<span class="kn">from</span> <span class="nn">domain.services.calculscinematique</span> <span class="kn">import</span> <span class="n">CalculsCinematique</span><span class="p">,</span> <span class="n">CalculsCinematiqueLevier</span><span class="p">,</span> <span class="n">CalculsCinematiqueDirecte</span>

<div class="viewcode-block" id="CalculsProfilCame">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame">[docs]</a>
<span class="k">class</span> <span class="nc">CalculsProfilCame</span><span class="p">(</span><span class="n">ABC</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Classe abstraite pour le calcul du profil de la came et des grandeurs associées.</span>

<span class="sd">    Cette classe constitue un utilitaire pour le calcul du profil de la came en coordonnées cartésiennes et polaires. Permet également le calcul de grandeurs associées à ce profil comme le rayon de courbure.</span>

<span class="sd">    Args:</span>
<span class="sd">        assemblage (Assemblage): Assemblage étudié.</span>
<span class="sd">        loiscame (LoisCame): Lois créée.</span>
<span class="sd">        calccinematique (CalculsCinematique): Utilitaire de calcul cinématique.</span>
<span class="sd">        ac_evalpts (np.ndarray): Angles de rotation de la came pour lesquels seront évalués le profil.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        lbd (callable): Loi de levée.</span>
<span class="sd">        lbd_doac (callable): Vitesse de la loi de levée.</span>
<span class="sd">        ccin (CalculsCinematique): Utilitaire de réalisation des calculs cinématiques.</span>
<span class="sd">        sensrot (str): Sens de rotation de la came. Positif dans le sens trigonométrique et négatif dans l&#39;autre.</span>
<span class="sd">        angle_polaire_itp (BSpline, optional): Interpolation de l&#39;angle polaire en fonction de l&#39;angle de rotation de la came.</span>
<span class="sd">        profil_polaire_itp (BSpline, optional): Interpolation du profil de la came en fonction de l&#39;angle polaire.</span>

<span class="sd">    Methods:</span>
<span class="sd">        rayon_courbure(eps) : Calcule le rayon de courbure pour un angle polaire.</span>
<span class="sd">        profil_polaire(eps): Calcule le profil polaire pour un angle polaire.</span>
<span class="sd">        interpolate_deplacement_roller(ac, rayon_roller): Crée un spline interpolant le déplacement du roller.</span>
<span class="sd">        interpolate_profil_polaire(ac): Crée une spline interpolant le profil polaire de la came.</span>
<span class="sd">        interpolate_angle_polaire(ac): Crée une spline interpolant l&#39;angle polaire en fonction de l&#39;angle de rotation de la came.</span>
<span class="sd">        plan_tangent(ac): Méthode abstraite pour la représentation du profil par plan tangent (voir B. Geoffroy).</span>
<span class="sd">        position_polaire_roller(ac, rayon_roller): Méthode abstraite pour le calcul du déplacement du roller en fonction de l&#39;angle de rotation de la came.</span>
<span class="sd">        angle_polaire(ac): Méthode abstraite pour le calcul de l&#39;angle polaire en fonction de l&#39;angle de rotation de la came.</span>
<span class="sd">        profil_cartesien(ac): Méthode abstraite pour le calcul du profil de la came en coordonnées cartésiennes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">assemblage</span><span class="p">:</span> <span class="n">Assemblage</span><span class="p">,</span> <span class="n">loiscame</span><span class="p">:</span> <span class="n">LoisCame</span><span class="p">,</span> <span class="n">calccinematique</span><span class="p">:</span> <span class="n">CalculsCinematique</span><span class="p">,</span> <span class="n">ac_evalpts</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lbd</span> <span class="o">=</span> <span class="n">loiscame</span><span class="o">.</span><span class="n">l</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lbd_doac</span> <span class="o">=</span> <span class="n">loiscame</span><span class="o">.</span><span class="n">v</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span> <span class="o">=</span> <span class="n">calccinematique</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sensrot</span> <span class="o">=</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">sens_rotation_came</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">angle_polaire_itp</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profil_polaire_itp</span> <span class="o">=</span> <span class="kc">None</span>
    
<div class="viewcode-block" id="CalculsProfilCame.rayon_courbure">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame.rayon_courbure">[docs]</a>
    <span class="k">def</span> <span class="nf">rayon_courbure</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eps</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calcule le rayon de courbure de la came à un angle polaire spécifié.</span>

<span class="sd">        Cette méthode calcule le rayon de courbure de la came pour l&#39;angle polaire, epsilon, indiqué. Par angle polaire, il est entendu l&#39;angle des coordonnées cylindriques. En effet, cet angle est différent de l&#39;angle de rotation de la came. Pour faire ce calcul, le profil polaire rho = f(epsilon) est interpolé par une spline.</span>

<span class="sd">        Args:</span>
<span class="sd">            eps (float): Angle polaire.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Le rayon de courbure à l&#39;angle indiqué.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rho</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">profil_polaire</span><span class="p">(</span><span class="n">eps</span><span class="p">)</span>
        <span class="n">rho_doeps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">profil_polaire_itp</span><span class="o">.</span><span class="n">derivative</span><span class="p">(</span><span class="n">nu</span><span class="o">=</span><span class="mi">1</span><span class="p">)(</span><span class="n">eps</span><span class="p">)</span>
        <span class="n">rho_ddoeps</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">profil_polaire_itp</span><span class="o">.</span><span class="n">derivative</span><span class="p">(</span><span class="n">nu</span><span class="o">=</span><span class="mi">2</span><span class="p">)(</span><span class="n">eps</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">rho</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="n">rho_doeps</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">3</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="n">rho</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">rho_doeps</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span> <span class="n">rho</span><span class="o">*</span><span class="n">rho_ddoeps</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CalculsProfilCame.profil_polaire">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame.profil_polaire">[docs]</a>
    <span class="k">def</span> <span class="nf">profil_polaire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">eps</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calcule le rayon polaire à un angle polaire spécifié.</span>

<span class="sd">        Cette méthode utilise directement profil polaire interpolé, rho = f(epsilon).</span>

<span class="sd">        Args:</span>
<span class="sd">            eps (float): Angle polaire.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Rayon polaire.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">profil_polaire_itp</span><span class="p">(</span><span class="n">eps</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CalculsProfilCame.interpolate_deplacement_roller">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame.interpolate_deplacement_roller">[docs]</a>
    <span class="k">def</span> <span class="nf">interpolate_deplacement_roller</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span> <span class="n">rayon_roller</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">8.5e-3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">scitp</span><span class="o">.</span><span class="n">BSpline</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Interpole le déplacement du roller en coordonnées polaires.</span>

<span class="sd">        Cette méthode interpole la position du roller exprimée en coordonnées polaires. Pour ce faire, on calcule la distance entre le centre de la came et le centre du roller ainsi que l&#39;angle entre le vecteur y3 lié à la came et le vecteur reliant le centre de rotation de la came au centre du roller. Ce calcul est réalisé pour l&#39;ensemble des angles de rotation de came indiqués. La distance est ensuite interpolée en fonction de l&#39;angle.  </span>

<span class="sd">        Args:</span>
<span class="sd">            ac (np.ndarray): Angles rotations de la came pour lesquels seront évalués la position du roller.</span>

<span class="sd">        Returns:</span>
<span class="sd">            scitp.BSpline: B-spline repérant le roller en coordonnées polaires par rapport au référentiel lié à la came.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eps3_evalpts</span><span class="p">,</span> <span class="n">rho3_evalpts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">position_polaire_roller</span><span class="p">(</span><span class="n">ac</span><span class="p">,</span> <span class="n">rayon_roller</span><span class="p">)</span> 
        <span class="n">knot_vector</span><span class="p">,</span><span class="n">coefficients</span><span class="p">,</span><span class="n">degree</span> <span class="o">=</span> <span class="n">scitp</span><span class="o">.</span><span class="n">splrep</span><span class="p">(</span><span class="n">eps3_evalpts</span><span class="p">,</span> <span class="n">rho3_evalpts</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">scitp</span><span class="o">.</span><span class="n">BSpline</span><span class="p">(</span><span class="n">knot_vector</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">extrapolate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CalculsProfilCame.interpolate_profil_polaire">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame.interpolate_profil_polaire">[docs]</a>
    <span class="k">def</span> <span class="nf">interpolate_profil_polaire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">scitp</span><span class="o">.</span><span class="n">BSpline</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Interpole le profil de la came exprimé en coordonnées polaires.</span>

<span class="sd">        Cette méthode interpole le profil de came exprimé en coordonnées polaires, rho=f(epsilon). Pour ce faire, le rayon polaire est d&#39;abord calculé pour un ensemble d&#39;angles de rotation de la came. L&#39;angle polaire, epsilon, est ensuite calculé pour ces mêmes angles de rotation de la came. Enfin, le profil polaire est interpolé.</span>

<span class="sd">        Args:</span>
<span class="sd">            ac (np.ndarray): Angles rotations de la came pour lesquels seront évalués le rayon et l&#39;angle polaire.</span>

<span class="sd">        Returns:</span>
<span class="sd">            scitp.BSpline: B-spline représentant le profil en coordonnées polaires.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rho_evalpts</span> <span class="o">=</span> <span class="n">npl</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">profil_cartesien</span><span class="p">(</span><span class="n">ac</span><span class="p">),</span> <span class="n">axis</span> <span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">eps_evalpts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_polaire</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span>
        <span class="n">knot_vector</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">,</span><span class="n">degree</span> <span class="o">=</span> <span class="n">scitp</span><span class="o">.</span><span class="n">splrep</span><span class="p">(</span><span class="n">eps_evalpts</span><span class="p">,</span> <span class="n">rho_evalpts</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">scitp</span><span class="o">.</span><span class="n">BSpline</span><span class="p">(</span><span class="n">knot_vector</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">extrapolate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CalculsProfilCame.interpolate_angle_polaire">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame.interpolate_angle_polaire">[docs]</a>
    <span class="k">def</span> <span class="nf">interpolate_angle_polaire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">scitp</span><span class="o">.</span><span class="n">BSpline</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Interpole l&#39;angle polaire, epsilon, en fonction de l&#39;angle de la came.</span>

<span class="sd">        Cette méthode interpole la valeur de l&#39;angle polaire, epsilon, en fonction de l&#39;angle de rotation de la came. Pour cela, l&#39;angle polaire est d&#39;abord calculé pour un ensemble d&#39;angles de rotation de la came définis.</span>

<span class="sd">        Args:</span>
<span class="sd">            ac (np.ndarray): Angles rotations de la came pour lesquels seront évalués la position du roller.</span>

<span class="sd">        Returns:</span>
<span class="sd">            scitp.BSpline: B-spline donnant l&#39;angle polaire en fonction de l&#39;angle de rotation de la came.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eps_evalpts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_polaire</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span>
        <span class="n">knot_vector</span><span class="p">,</span><span class="n">coefficients</span><span class="p">,</span><span class="n">degree</span> <span class="o">=</span> <span class="n">scitp</span><span class="o">.</span><span class="n">splrep</span><span class="p">(</span><span class="n">ac</span><span class="p">,</span> <span class="n">eps_evalpts</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">scitp</span><span class="o">.</span><span class="n">BSpline</span><span class="p">(</span><span class="n">knot_vector</span><span class="p">,</span> <span class="n">coefficients</span><span class="p">,</span> <span class="n">degree</span><span class="p">,</span> <span class="n">extrapolate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></div>

    
<div class="viewcode-block" id="CalculsProfilCame.plan_tangent">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame.plan_tangent">[docs]</a>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">plan_tangent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="CalculsProfilCame.position_polaire_roller">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame.position_polaire_roller">[docs]</a>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">position_polaire_roller</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">rayon_roller</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span><span class="mf">8.5e-3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="CalculsProfilCame.angle_polaire">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame.angle_polaire">[docs]</a>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">angle_polaire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="CalculsProfilCame.profil_cartesien">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCame.profil_cartesien">[docs]</a>
    <span class="nd">@abstractmethod</span>
    <span class="k">def</span> <span class="nf">profil_cartesien</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span> <span class="p">:</span>
        <span class="k">pass</span></div>
</div>

            
<div class="viewcode-block" id="CalculsProfilCameLevier">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameLevier">[docs]</a>
<span class="k">class</span> <span class="nc">CalculsProfilCameLevier</span><span class="p">(</span><span class="n">CalculsProfilCame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Implémentation de la classe abstraite &quot;CalculsProfilCame&quot; pour les système à &quot;levier&quot;.</span>

<span class="sd">    Args:</span>
<span class="sd">        assemblage (AssemblageLinguet): L&#39;assemblage étudié. Il doit être constitué d&#39;un &quot;levier&quot;.</span>
<span class="sd">        loiscame (LoisCame): Lois de distribution étudiées.</span>
<span class="sd">        calccinematique (CalculsCinematiqueLevier): Utilitaire de calcul cinématique les système à &quot;levier&quot;.</span>
<span class="sd">        ac_evalpts (np.ndarray): Angles de rotation de la came pour lesquels seront interpolés les profils.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        oc (np.ndarray): Coordonnées du centre de la came.</span>
<span class="sd">        ol (np.ndarray): Coordonnées du levier.</span>
<span class="sd">        cl (np.ndarray): Vecteur CL. Voir définition dans le rapport.</span>
<span class="sd">        l_ling (float): Longueur du linguet. De son centre de rotation au centre du patin en contact avec la soupape.</span>
<span class="sd">        rps (float): Rayon de courbure du patin côté soupape.</span>
<span class="sd">        rpc (float): Rayon de courbure du patin côté came.</span>
<span class="sd">        rb (float): Rayon de base de la came.</span>
<span class="sd">        gamma0 (float): Angle entre le vecteur y1 et le vecteur BC à levée nulle.</span>
<span class="sd">    </span>
<span class="sd">    Methods : </span>
<span class="sd">        plan_tangent(ac): Calcule la représentation du profil par plan tangent (voir B. Geoffroy).</span>
<span class="sd">        position_polaire_roller(ac, rayon_roller): Calcule le déplacement du roller en fonction de l&#39;angle de rotation de la came.</span>
<span class="sd">        angle_polaire(ac): Calcule l&#39;angle polaire en fonction de l&#39;angle de rotation de la came.</span>
<span class="sd">        profil_cartesien(ac): Calcule le profil de la came en coordonnées cartésiennes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">assemblage</span> <span class="p">:</span> <span class="n">AssemblageLinguet</span><span class="p">,</span> <span class="n">loiscame</span> <span class="p">:</span> <span class="n">LoisCame</span><span class="p">,</span> <span class="n">calccinematique</span> <span class="p">:</span> <span class="n">CalculsCinematiqueLevier</span><span class="p">,</span> <span class="n">ac_evalpts</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">assemblage</span><span class="p">,</span> <span class="n">loiscame</span><span class="p">,</span> <span class="n">calccinematique</span><span class="p">,</span> <span class="n">ac_evalpts</span><span class="p">)</span>
        
        <span class="bp">self</span><span class="o">.</span><span class="n">__oc</span> <span class="o">=</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">coords_came</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__ol</span> <span class="o">=</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">coords_levier</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__cl</span> <span class="o">=</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">coords_levier</span> <span class="o">-</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">coords_came</span>
        

        <span class="bp">self</span><span class="o">.</span><span class="n">__l_ling</span> <span class="o">=</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">levier</span><span class="o">.</span><span class="n">longueur</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rps</span> <span class="o">=</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">levier</span><span class="o">.</span><span class="n">patin_soupape</span><span class="o">.</span><span class="n">rayon_courbure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rpc</span> <span class="o">=</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">levier</span><span class="o">.</span><span class="n">patin_came</span><span class="o">.</span><span class="n">rayon_courbure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__rb</span> <span class="o">=</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">came</span><span class="o">.</span><span class="n">rayon_base</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__gamma0</span> <span class="o">=</span> <span class="n">assemblage</span><span class="o">.</span><span class="n">angle_leviercame_init</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">angle_polaire_itp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_angle_polaire</span><span class="p">(</span><span class="n">ac_evalpts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">profil_polaire_itp</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">interpolate_profil_polaire</span><span class="p">(</span><span class="n">ac_evalpts</span><span class="p">)</span>
        
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">oc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__oc</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ol</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__ol</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">cl</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cl</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">l_ling</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__l_ling</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rps</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rps</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rpc</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rpc</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">rb</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rb</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">gamma0</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__gamma0</span>
    
<div class="viewcode-block" id="CalculsProfilCameLevier.plan_tangent">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameLevier.plan_tangent">[docs]</a>
    <span class="k">def</span> <span class="nf">plan_tangent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calcule la position du plan tangent pour un angle de rotation de la came donné.</span>

<span class="sd">        Cette méthode calcule la hauteur et l&#39;angle permettant de repérer le plan tangent à la came. Voir l&#39;étude de B. Geoffroy pour plus de détails. </span>

<span class="sd">        Args:</span>
<span class="sd">            ac: L&#39;angle de rotation de la came.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float, float]: La heuteur et l&#39;angle permettant de positionner le plan tangent.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">phi</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span>
        <span class="n">rho2</span> <span class="o">=</span> <span class="n">npl</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">cb</span><span class="p">(</span><span class="n">ac</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">hc</span> <span class="o">=</span> <span class="n">rho2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">rpc</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">rb</span>
        <span class="n">delta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sensrot</span><span class="o">*</span><span class="n">ac</span>  <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">eta</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span> <span class="o">-</span> <span class="n">phi</span>
        
        <span class="k">return</span> <span class="n">hc</span><span class="p">,</span> <span class="n">delta</span></div>

    
<div class="viewcode-block" id="CalculsProfilCameLevier.position_polaire_roller">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameLevier.position_polaire_roller">[docs]</a>
    <span class="k">def</span> <span class="nf">position_polaire_roller</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">rayon_roller</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">8.5e-3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calcule la postion du centre du roller en coordonnées polaires dans le référentiel de la came.</span>

<span class="sd">        Cette méthode calcule la position du roller, rayon et angle, en coordonnées polaires dans le référentiel de la came.</span>

<span class="sd">        Args:</span>
<span class="sd">            ac(float): Angle de rotation de la came.</span>
<span class="sd">            rayon_roller (float, optional): Rayon du roller.</span>

<span class="sd">        Returns:</span>
<span class="sd">            tuple[float, float]: rayon et angle polaire permettant de positionner le centre du roller.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rho2</span> <span class="o">=</span> <span class="n">npl</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">cb</span><span class="p">(</span><span class="n">ac</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">phi</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">phi</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span>
        <span class="n">eta</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">eta</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span>
        <span class="n">rho3</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">rho2</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="n">rayon_roller</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">rpc</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="p">(</span><span class="n">rayon_roller</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">rpc</span><span class="p">)</span><span class="o">*</span><span class="n">rho2</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="n">phi</span><span class="p">))</span>
        <span class="n">eps3</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sensrot</span><span class="o">*</span><span class="n">ac</span>  <span class="o">-</span> <span class="n">eta</span> <span class="o">-</span> <span class="n">np</span><span class="o">.</span><span class="n">arcsin</span><span class="p">((</span><span class="n">rayon_roller</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">rpc</span><span class="p">)</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">phi</span><span class="p">)</span><span class="o">/</span><span class="n">rho3</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">eps3</span><span class="p">,</span> <span class="n">rho3</span></div>

    
<div class="viewcode-block" id="CalculsProfilCameLevier.angle_polaire">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameLevier.angle_polaire">[docs]</a>
    <span class="k">def</span> <span class="nf">angle_polaire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calcule l&#39;angle polaire, espsilon.</span>

<span class="sd">        Calcule l&#39;angle polaire espilon pour un angle de rotation de came donné.</span>

<span class="sd">        Args:</span>
<span class="sd">            ac(float): Angle de rotation de la came.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: L&#39;angle polaire associé à l&#39;angle de rotation de la came.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">ac_vec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span>
        <span class="n">rot31</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">matrot</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sensrot</span><span class="o">*</span><span class="n">ac_vec</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma0</span><span class="p">))</span>
        <span class="n">cb</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">einsum</span><span class="p">(</span><span class="s2">&quot;ijk, ik -&gt; ij&quot;</span><span class="p">,</span> <span class="n">rot31</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">cb</span><span class="p">(</span><span class="n">ac_vec</span><span class="p">))</span>
        <span class="n">ci</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">profil_cartesien</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span>

        <span class="n">cos_eps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">einsum</span><span class="p">(</span><span class="s2">&quot;ij, ij -&gt; i&quot;</span><span class="p">,</span> <span class="n">cb</span><span class="p">,</span> <span class="n">ci</span><span class="p">)</span><span class="o">/</span><span class="n">npl</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="n">npl</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">ci</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">cos_eps_defined</span> <span class="o">=</span> <span class="p">(</span><span class="n">cos_eps</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">cos_eps</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">cos_eps_sup</span> <span class="o">=</span> <span class="n">cos_eps</span> <span class="o">&gt;=</span> <span class="mi">1</span>
        <span class="n">cos_eps_inf</span> <span class="o">=</span> <span class="n">cos_eps</span> <span class="o">&lt;=</span> <span class="o">-</span><span class="mi">1</span>

        <span class="n">abs_eps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cos_eps</span><span class="p">))</span>
        <span class="n">abs_eps</span><span class="p">[</span><span class="n">cos_eps_inf</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span>
        <span class="n">abs_eps</span><span class="p">[</span><span class="n">cos_eps_defined</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">cos_eps</span><span class="p">[</span><span class="n">cos_eps_defined</span><span class="p">])</span>
        <span class="n">abs_eps</span><span class="p">[</span><span class="n">cos_eps_sup</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="n">sgn_eps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sign</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">cb</span><span class="p">,</span> <span class="n">ci</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])))</span>

        <span class="k">return</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">sensrot</span><span class="o">*</span><span class="n">ac</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">eta</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span> <span class="o">+</span> <span class="n">sgn_eps</span><span class="o">*</span><span class="n">abs_eps</span></div>

    
<div class="viewcode-block" id="CalculsProfilCameLevier.profil_cartesien">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameLevier.profil_cartesien">[docs]</a>
    <span class="k">def</span> <span class="nf">profil_cartesien</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Calule la position du point de contact dans le référentiel lié à la came.</span>

<span class="sd">        Cette méthode calcule la position du point de contact entre la came et son patin, en coordonnées cartésiennes, dans le référentiel lié à la came. Pour cela, le vecteur CI_c, calculé par l&#39;utilitaire de cinématique dans la base liée à la soupape, subit une simple rotation d&#39;un angle ac + gamma0. Cette rotation est ici écrite sous forme matricielle. En renseignant des angles allant de 0 à 360 degrées, on peut représenter le profil de la came.</span>

<span class="sd">        Args:</span>
<span class="sd">            ac: Angle de rotation de la came.</span>

<span class="sd">        Returns:</span>
<span class="sd">            np.ndarray: Position du point de contact en coordonnées cartésiennes dans le référentiel lié à la came.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">einsum</span><span class="p">(</span><span class="s2">&quot;ijk, ik -&gt; ij&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">matrot</span><span class="p">(</span><span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">sensrot</span><span class="o">*</span><span class="n">ac</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">gamma0</span><span class="p">)),</span> <span class="bp">self</span><span class="o">.</span><span class="n">ccin</span><span class="o">.</span><span class="n">ci_c</span><span class="p">(</span><span class="n">ac</span><span class="p">))</span></div>
</div>


<div class="viewcode-block" id="CalculsProfilCameDirecte">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameDirecte">[docs]</a>
<span class="k">class</span> <span class="nc">CalculsProfilCameDirecte</span><span class="p">(</span><span class="n">CalculsProfilCame</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Implémentation de la classe abstraite &quot;CalculsProfilCame&quot; pour les système à attaque directe.</span>

<span class="sd">    Args:</span>
<span class="sd">        assemblage (AssemblageLinguet): L&#39;assemblage étudié. Il doit être constitué à attaque directe et constitué d&#39;un poussoir.</span>
<span class="sd">        loiscame (LoisCame): Lois de distribution étudiées.</span>
<span class="sd">        calccinematique (CalculsCinematiqueLevier): Utilitaire de calcul cinématique les système à attaque directe.</span>
<span class="sd">        ac_evalpts (np.ndarray): Angles de rotation de la came pour lesquels seront interpolés les profils.</span>

<span class="sd">    Attributes:</span>
<span class="sd">        oc (np.ndarray): Coordonnées du centre de la came.</span>
<span class="sd">        rb (float): Rayon de base de la came.</span>

<span class="sd">    Methods : </span>
<span class="sd">        plan_tangent(ac): Calcule la représentation du profil par plan tangent (voir B. Geoffroy).</span>
<span class="sd">        position_polaire_roller(ac, rayon_roller): Calcule le déplacement du roller en fonction de l&#39;angle de rotation de la came.</span>
<span class="sd">        angle_polaire(ac): Calcule l&#39;angle polaire en fonction de l&#39;angle de rotation de la came.</span>
<span class="sd">        profil_cartesien(ac): Calcule le profil de la came en coordonnées cartésiennes.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">assemblage</span> <span class="p">:</span> <span class="n">AssemblageDirecte</span><span class="p">,</span> <span class="n">loiscame</span> <span class="p">:</span> <span class="n">LoisCame</span><span class="p">,</span> <span class="n">calccinematique</span> <span class="p">:</span> <span class="n">CalculsCinematiqueDirecte</span><span class="p">,</span> <span class="n">ac_evalpts</span> <span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">assemblage</span><span class="p">,</span> <span class="n">loiscame</span><span class="p">,</span> <span class="n">calccinematique</span><span class="p">,</span> <span class="n">ac_evalpts</span><span class="p">)</span>
    
<div class="viewcode-block" id="CalculsProfilCameDirecte.plan_tangent">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameDirecte.plan_tangent">[docs]</a>
    <span class="k">def</span> <span class="nf">plan_tangent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">pass</span></div>

            
<div class="viewcode-block" id="CalculsProfilCameDirecte.position_polaire_roller">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameDirecte.position_polaire_roller">[docs]</a>
    <span class="k">def</span> <span class="nf">position_polaire_roller</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">rayon_roller</span><span class="p">:</span> <span class="nb">float</span><span class="o">=</span> <span class="mf">8.5e-3</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]:</span>
        <span class="k">pass</span></div>

    
<div class="viewcode-block" id="CalculsProfilCameDirecte.angle_polaire">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameDirecte.angle_polaire">[docs]</a>
    <span class="k">def</span> <span class="nf">angle_polaire</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="k">pass</span></div>

    
<div class="viewcode-block" id="CalculsProfilCameDirecte.profil_cartesien">
<a class="viewcode-back" href="../../../../softcam.domain.services.html#softcam.domain.services.calculsprofilcame.CalculsProfilCameDirecte.profil_cartesien">[docs]</a>
    <span class="k">def</span> <span class="nf">profil_cartesien</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ac</span><span class="p">:</span> <span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
        <span class="k">pass</span></div>
</div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Droits d'auteur 2024, Jérémy Lemaitre.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>